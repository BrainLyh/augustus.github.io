{"title":"Ubuntu 16.04 配置docker","slug":"ubuntu配置docker","date":"2019-08-02T08:15:29.000Z","updated":"2019-09-10T01:41:53.661Z","comments":true,"path":"api/articles/ubuntu配置docker.json","photos":[],"link":"","excerpt":"学会装docker，走遍天下都不怕!<br>😊 🆒","covers":null,"content":"<p>学会装docker，走遍天下都不怕!<br>😊 🆒</p>\n<a id=\"more\"></a>\n<h1 id=\"Ubuntu-16-04-配置docker\"><a href=\"#Ubuntu-16-04-配置docker\" class=\"headerlink\" title=\"Ubuntu 16.04 配置docker\"></a>Ubuntu 16.04 配置docker</h1><p>想装个docker好好学学p神的vulhub:<a href=\"https://github.com/vulhub/vulhub\" title=\"p神-vulhub\">https://github.com/vulhub/vulhub</a></p>\n<h2 id=\"更新源\"><a href=\"#更新源\" class=\"headerlink\" title=\"更新源\"></a>更新源</h2><p>先备份</p>\n<pre><code>sudo cp /etc/apt/sources.list /etc/apt/sources_init.list</code></pre><p>更换</p>\n<pre><code>sudo gedit /etc/apt/sources.list</code></pre><p>阿里</p>\n<pre><code>deb http://mirrors.aliyun.com/ubuntu/ xenial main\ndeb-src http://mirrors.aliyun.com/ubuntu/ xenial main\n\ndeb http://mirrors.aliyun.com/ubuntu/ xenial-updates main\ndeb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main\n\ndeb http://mirrors.aliyun.com/ubuntu/ xenial universe\ndeb-src http://mirrors.aliyun.com/ubuntu/ xenial universe\ndeb http://mirrors.aliyun.com/ubuntu/ xenial-updates universe\ndeb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates universe\n\ndeb http://mirrors.aliyun.com/ubuntu/ xenial-security main\ndeb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main\ndeb http://mirrors.aliyun.com/ubuntu/ xenial-security universe\ndeb-src http://mirrors.aliyun.com/ubuntu/ xenial-security universe</code></pre><p>清华</p>\n<pre><code>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-updates main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-updates main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-backports main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-backports main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-security main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-security main restricted universe multiverse</code></pre><p>网易</p>\n<pre><code>deb http://mirrors.163.com/ubuntu/ wily main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ wily-security main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ wily-updates main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ wily-proposed main restricted universe multiverse\ndeb http://mirrors.163.com/ubuntu/ wily-backports main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ wily main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ wily-security main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ wily-updates main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ wily-proposed main restricted universe multiverse\ndeb-src http://mirrors.163.com/ubuntu/ wily-backports main restricted universe multiverse</code></pre><p>执行更新</p>\n<pre><code>sudo apt-get update</code></pre><h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><p>查看内核版本</p>\n<pre><code>uname -r</code></pre><p>启动服务</p>\n<pre><code>sudo service docker start</code></pre><p>测试</p>\n<pre><code>docker run hello-world</code></pre><h2 id=\"镜像加速\"><a href=\"#镜像加速\" class=\"headerlink\" title=\"镜像加速\"></a>镜像加速</h2><p>新建<code>/etc/docker/daemon.json</code>文件来配置daemon，在该文件中加入</p>\n<pre><code>{\n  &quot;registry-mirrors&quot;: [&quot;http://hub-mirror.c.163.com&quot;]\n}</code></pre><h2 id=\"docker使用\"><a href=\"#docker使用\" class=\"headerlink\" title=\"docker使用\"></a>docker使用</h2><p>我们通过使用<code>-t -i</code>参数来进入交互式终端</p>\n<pre><code>docker run -i -t ubuntu:15.10 /bin/bash</code></pre><p>我们已进入终端，可以使用<code>ls</code>，<code>cat /proc/version</code>查看信息.</p>\n<p>我们使用 -d 参数创建一个以进程方式运行的容器</p>\n<p>docker -d </p>\n<p>我们使用 ps 来查看容器信息</p>\n<pre><code>docker ps</code></pre><p>我们使用 stop 来停止容器</p>\n<pre><code>docker stop name</code></pre><p>我们使用<code>docker images</code> 来列出本地镜像列表</p>\n<p>使用 <code>docker pull</code> 来获得一个镜像</p>\n<p>使用 <code>docker search name</code> 来查找一个镜像</p>\n<h3 id=\"运行一个web应用\"><a href=\"#运行一个web应用\" class=\"headerlink\" title=\"运行一个web应用\"></a>运行一个web应用</h3><p>在docker中运行一个Python flask 应用来运行一个web应用。</p>\n<pre><code>docker pull training/webapp #载入镜像\ndocker run -d -P training/webapp python app.py</code></pre><p>-P将容器内部使用的网络端口随机映射到我们使用的主机高端口上<br>-p容器内部端口绑定到指定主机端口</p>\n<p>另外 我们也可以指定IP地址。</p>\n<h2 id=\"下载vulhub\"><a href=\"#下载vulhub\" class=\"headerlink\" title=\"下载vulhub\"></a>下载vulhub</h2><pre><code>wget https://github.com/vulhub/vulhub/archive/master.zip -O vulhub-master.zip\nunzip vulhub-master.zip</code></pre><p>解压时候可能会报错</p>\n<pre><code>unzip:  cannot find zipfile directory in one of vulhub-master.zip or\nvulhub-master.zip.zip, and cannot find vulhub-master.zip.ZIP, period.</code></pre><p>我们换个压缩方式就成</p>\n<pre><code>sudo apt-get install fastjar\njar xvf vulhub-master.zip</code></pre><p>然后</p>\n<pre><code>cd vulhub-master\n\n# Enter the directory of vulnerability/environment\ncd flask/ssti\n\n# Compile environment\ndocker-compose build\n\n# Run environment\ndocker-compose up -d</code></pre><p>愉快的学习吧！</p>\n<h2 id=\"复现ctf环境\"><a href=\"#复现ctf环境\" class=\"headerlink\" title=\"复现ctf环境\"></a>复现ctf环境</h2><h3 id=\"dockerfile\"><a href=\"#dockerfile\" class=\"headerlink\" title=\"dockerfile\"></a>dockerfile</h3><p>先进入dockerfile目录，建立一个images</p>\n<pre><code>docker build -t name . \ndocker run -i -d -p 20000:80 name</code></pre><h3 id=\"docker-compose-yml\"><a href=\"#docker-compose-yml\" class=\"headerlink\" title=\"docker-compose.yml\"></a>docker-compose.yml</h3><pre><code>docker-compose build\ndocker-compose up -d</code></pre><h2 id=\"参考链接\"><a href=\"#参考链接\" class=\"headerlink\" title=\"参考链接\"></a>参考链接</h2><blockquote>\n<p><a href=\"https://github.com/vulhub/vulhub\">https://github.com/vulhub/vulhub</a><br><a href=\"https://www.runoob.com/docker/docker-container-connection.html\" target=\"_blank\" rel=\"noopener\">https://www.runoob.com/docker/docker-container-connection.html</a><br><a href=\"https://askubuntu.com/questions/54904/unzip-error-end-of-central-directory-signature-not-found\" target=\"_blank\" rel=\"noopener\">https://askubuntu.com/questions/54904/unzip-error-end-of-central-directory-signature-not-found</a><br><a href=\"https://blog.csdn.net/qq_35451572/article/details/79516563\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/qq_35451572/article/details/79516563</a></p>\n</blockquote>\n","categories":[{"name":"docker","slug":"docker","count":1,"path":"api/categories/docker.json"}],"tags":[{"name":"docker","slug":"docker","count":1,"path":"api/tags/docker.json"}]}